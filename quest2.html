<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Online Oculus Quest</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: true">
        <!-- Boden -->
        <a-plane id="floor" position="0 0 -4" rotation="-90 0 0" width="8" height="8" color="#7BC8A4"></a-plane>
        
        <!-- Himmel -->
        <a-sky color="#ECECEC"></a-sky>

        <!-- Oculus Quest Controller -->
        <a-entity oculus-touch-controls="hand: left" a-port="active: true">
            <a-plane id="UIplane" position="0 0.10 0" rtation="-90 -90 0" width="0.25" height="0.10" color="blue" visible="true"></a-plane>
        </a-entity>
        <a-entity oculus-touch-controls="hand: right" ></a-entity>
        
        <!-- Kamera und Aussehen -->
        <a-camera position="0 1.70 0"></a-camera>
    </a-scene>
    <script>
        // Zugriff auf das Scene-Element und das Cursor-Element
        let scene = document.querySelector('a-scene');
        let cursor = document.querySelector('a-cursor');
        let floor = document.querySelector('#floor');

        // Event-Listener für den VR-Modus
        scene.addEventListener('enter-vr', function() {
            floor.setAttribute('color', 'red'); // Ändert die Farbe der Plane in Rot
        });
        
        scene.addEventListener('exit-vr', function() {
            floor.setAttribute('color', '#7BC8A4'); // Setzt die Farbe der Plane zurück
        });
        
        // Event-Listener für den VR-Modus
        scene.addEventListener('enter-vr', function() {
            floor.setAttribute('raycaster', 'objects: none'); // Deaktiviert den Cursor
        });
        
        scene.addEventListener('exit-vr', function() {
            floor.setAttribute('raycaster', ''); // Aktiviert den Cursor
        });
        
        // Event-Listener für WASD-Steuerung (angenommen, dass Sie die Steuerung auf einem Entity haben, z. B. der Kamera)
        let wasdControls = document.querySelector('[wasd-controls]');
        
        wasdControls.addEventListener('move-start', function() {
            cursor.setAttribute('raycaster', ''); // Aktiviert den Cursor
        });
        
        wasdControls.addEventListener('move-end', function() {
            cursor.setAttribute('raycaster', 'objects: none'); // Deaktiviert den Cursor
        });

        let controller = document.querySelector('[oculus-touch-controls="hand: left"]');
        let ui = document.querySelector('#UIplane');

        // Event-Listener für den Button "X"
        controller.addEventListener('buttondown', function(event) {
            if (event.detail === 'xbutton') {
                // Umschalten der Sichtbarkeit der Plane
                let isVisible = ui.getAttribute('visible');
                ui.setAttribute('visible', !isVisible);
            }
        });
    </script>
</body>
</html>
