<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Online Oculus Quest</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: true">
        <!-- Boden -->
        <a-plane class="collidable" position="0 0 -4" rotation="-90 0 0" width="8" height="8" color="#7BC8A4"></a-plane>
        
        <!-- Himmel -->
        <a-sky color="#ECECEC"></a-sky>

        <!-- Oculus Quest Controller -->
        <a-entity oculus-touch-controls="hand: left" a-port="active: true">
            <a-plane id="myPlane" position="0 0 0" width="0.5" height="0.5" color="blue"></a-plane>
        </a-entity>
        <a-entity oculus-touch-controls="hand: right" a-port="active: true"></a-entity>
        
        <!-- Kamera und Aussehen -->
        <a-camera position="0 1.6 0"></a-camera>
    </a-scene>
    <script>
        // Zugriff auf das Scene-Element und das Cursor-Element
        let scene = document.querySelector('a-scene');
        let cursor = document.querySelector('a-cursor');
        let plane = document.querySelector('a-plane');
        let leftController = document.querySelector('[oculus-touch-controls="hand: left"]');
        let plane = document.querySelector('#myPlane');

        // Event-Listener für den VR-Modus
        scene.addEventListener('enter-vr', function() {
            plane.setAttribute('color', 'red'); // Ändert die Farbe der Plane in Rot
        });
        
        scene.addEventListener('exit-vr', function() {
            plane.setAttribute('color', '#7BC8A4'); // Setzt die Farbe der Plane zurück
        });
        
        // Event-Listener für den VR-Modus
        scene.addEventListener('enter-vr', function() {
            cursor.setAttribute('raycaster', 'objects: none'); // Deaktiviert den Cursor
        });
        
        scene.addEventListener('exit-vr', function() {
            cursor.setAttribute('raycaster', ''); // Aktiviert den Cursor
        });
        
        // Event-Listener für WASD-Steuerung (angenommen, dass Sie die Steuerung auf einem Entity haben, z. B. der Kamera)
        let wasdControls = document.querySelector('[wasd-controls]');
        
        wasdControls.addEventListener('move-start', function() {
            cursor.setAttribute('raycaster', ''); // Aktiviert den Cursor
        });
        
        wasdControls.addEventListener('move-end', function() {
            cursor.setAttribute('raycaster', 'objects: none'); // Deaktiviert den Cursor
        });

        // Steuert die Opacity der Plane
        leftController.addEventListener('buttondown', function(event) {
        if (event.detail.id === 0) { // X-Button des linken Controllers
            if (plane.getAttribute('material').opacity === 1) {
                plane.setAttribute('material', 'opacity', 0); // Plane ausblenden
            } else {
                plane.setAttribute('material', 'opacity', 1); // Plane einblenden
            }
        }
    });
    </script>
</body>
</html>
