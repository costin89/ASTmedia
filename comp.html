<!DOCTYPE html>
<html>
<head>
  <title>Kompass App</title>
  <style>
    #kompass {
      width: 200px;
      height: 200px;
      border: 10px solid #000;
      border-radius: 50%;
      position: relative;
    }
    #nadel {
      width: 10px;
      height: 100px;
      background-color: red;
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: 50% 0%;
    }
  </style>
</head>
<body>
  <button onclick="requestPermission()">Berechtigung anfordern</button>
  <div id="kompass">
    <div id="nadel"></div>
  </div>
  <script>
    async function requestPermission() {
      // Berechtigungsanfrage für den Zugriff auf die Geräteorientierung
      const state = await navigator.permissions.query({ name: 'accelerometer' });
      
      if (state.state === 'granted') {
        initOrientation();
      } else {
        alert("Zugriff auf den Sensor wurde verweigert.");
      }
    }

    function initOrientation() {
      window.addEventListener("deviceorientationabsolute", function(event) {
        if (event.absolute) {
          var alpha = event.alpha;
          var nadel = document.getElementById("nadel");
          nadel.style.transform = `rotate(${alpha}deg)`;
        } else {
          console.log("Die Ausrichtung ist nicht absolut!");
        }
      }, false);
    }
  </script>
</body>
</html>
